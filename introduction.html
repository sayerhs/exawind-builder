
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Introduction &#8212; exawind-builder v0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Setting up exawind-builder" href="installation.html" />
    <link rel="prev" title="ExaWind Build Scripts User Manual" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="introduction">
<span id="id1"></span><h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>Exawind-builder is a set of bash functions that can be compiled to generate
build scripts for the software used in <a class="reference external" href="https://www.exawind.org">ExaWind</a>
project on the different systems of interest. It separates machine-specific
configuration from the software-specific configuration (tracking library
dependencies and CMake configuration) so that they can be modularized and
combined for different systems and compilers.</p>
<p>Pre-built configurations exist for the following systems. Use the <code class="docutils literal notranslate"><span class="pre">system</span>
<span class="pre">name</span></code> shown on the following table when generating scripts targeting that
particular system.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>System Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">spack</span></code></p></td>
<td><p><a class="reference external" href="https:://github.com/spack/spack">Spack</a> (system agnostic)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">anl-jlse-skylake</span></code></p></td>
<td><p><a class="reference external" href="https://www.jlse.anl.gov">ANL JLSE Skylake</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">anl-jlse-gpu_v100_smx2</span></code></p></td>
<td><p><a class="reference external" href="https://www.jlse.anl.gov">ANL JLSE V100 nodes</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ornl-summit</span></code></p></td>
<td><p><a class="reference external" href="https://www.olcf.ornl.gov/summit/">OLCF Summit</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">eagle</span></code></p></td>
<td><p><a class="reference external" href="https://www.nrel.gov/hpc/eagle-system.html">NREL Eagle</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cori</span></code></p></td>
<td><p><a class="reference external" href="http://www.nersc.gov/users/computational-systems/cori/">NERSC Cori</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">summitdev</span></code></p></td>
<td><p><a class="reference external" href="https://www.olcf.ornl.gov/olcf-resources/compute-systems/summit/">OLCF SummitDev</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">snl-waterman</span></code>.</p></td>
<td><p>Sandia waterman cluster (also <code class="docutils literal notranslate"><span class="pre">snl-waterman-atdm</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">snl-ghost</span></code></p></td>
<td><p>Sandia Ghost cluster</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">snl-skybridge</span></code></p></td>
<td><p>Sandia Skybridge cluster</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">snl-ascicgpu</span></code></p></td>
<td><p>Sandia ASC GPU development machines</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">snl-ceerws</span></code></p></td>
<td><p>Sandia blade workstations</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">snl-ews</span></code></p></td>
<td><p>Sandia engineering workstations</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pnnl-constance</span></code></p></td>
<td><p>PNNL Constance system</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rhodes</span></code></p></td>
<td><p>NREL nightly build and test system</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">peregrine</span></code></p></td>
<td><p><a class="reference external" href="https://www.nrel.gov/hpc/peregrine-system.html">NREL Peregrine</a></p></td>
</tr>
</tbody>
</table>
<p>The following compilers are configured for each machine. In situations where
multiple compilers are present, we recommend that the users use the first one.
The latter ones have not received enough testing and might have issues.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 48%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Environment</p></th>
<th class="head"><p>Compilers</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>anl-jlse-skylake</p></td>
<td><p>gcc</p></td>
</tr>
<tr class="row-odd"><td><p>anl-jlse-gpu_v100_smx2</p></td>
<td><p>gcc, cuda</p></td>
</tr>
<tr class="row-even"><td><p>ornl-summit</p></td>
<td><p>gcc, cuda</p></td>
</tr>
<tr class="row-odd"><td><p>eagle</p></td>
<td><p>gcc</p></td>
</tr>
<tr class="row-even"><td><p>cori</p></td>
<td><p>intel</p></td>
</tr>
<tr class="row-odd"><td><p>summitdev</p></td>
<td><p>gcc, xl, cuda</p></td>
</tr>
<tr class="row-even"><td><p>snl-waterman.</p></td>
<td><p>gcc, cuda</p></td>
</tr>
<tr class="row-odd"><td><p>snl-ghost</p></td>
<td><p>intel</p></td>
</tr>
<tr class="row-even"><td><p>snl-skybridge</p></td>
<td><p>intel</p></td>
</tr>
<tr class="row-odd"><td><p>snl-ascicgpu</p></td>
<td><p>gcc, cuda</p></td>
</tr>
<tr class="row-even"><td><p>snl-ceerws</p></td>
<td><p>gcc</p></td>
</tr>
<tr class="row-odd"><td><p>snl-ews</p></td>
<td><p>gcc</p></td>
</tr>
<tr class="row-even"><td><p>pnnl-constance</p></td>
<td><p>gcc</p></td>
</tr>
<tr class="row-odd"><td><p>rhodes</p></td>
<td><p>gcc, intel</p></td>
</tr>
<tr class="row-even"><td><p>Mac OSX</p></td>
<td><p>clang, gcc</p></td>
</tr>
<tr class="row-odd"><td><p>peregrine</p></td>
<td><p>gcc, intel</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Exawind-builder provides CMake configurations for the following codes used
within the ExaWind project. Please consult <a class="reference internal" href="reference.html#reference"><span class="std std-ref">Reference</span></a> section for
configuration variables availble to customize configuration of each project.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Nalu-Wind</p></td>
<td><p><a class="reference external" href="https://github.com/exawind/nalu-wind.git">https://github.com/exawind/nalu-wind.git</a></p></td>
</tr>
<tr class="row-even"><td><p>Trilinos</p></td>
<td><p><a class="reference external" href="https://github.com/trilinos/trilinos.git">https://github.com/trilinos/trilinos.git</a></p></td>
</tr>
<tr class="row-odd"><td><p>OpenFAST</p></td>
<td><p><a class="reference external" href="https://github.com/openfast/openfast.git">https://github.com/openfast/openfast.git</a></p></td>
</tr>
<tr class="row-even"><td><p>Nalu Wind Utilities</p></td>
<td><p><a class="reference external" href="https://github.com/exawind/wind-utils.git">https://github.com/exawind/wind-utils.git</a></p></td>
</tr>
<tr class="row-odd"><td><p>TIOGA</p></td>
<td><p><a class="reference external" href="https://github.com/jsitaraman/tioga.git">https://github.com/jsitaraman/tioga.git</a></p></td>
</tr>
<tr class="row-even"><td><p>TIOGA Utilities</p></td>
<td><p><a class="reference external" href="https://github.com/sayerhs/tioga_utils.git">https://github.com/sayerhs/tioga_utils.git</a></p></td>
</tr>
<tr class="row-odd"><td><p>pySTK</p></td>
<td><p><a class="reference external" href="https://github.com/sayerhs/pystk.git">https://github.com/sayerhs/pystk.git</a></p></td>
</tr>
<tr class="row-even"><td><p>HYPRE</p></td>
<td><p><a class="reference external" href="https://github.com/LLNL/hypre.git">https://github.com/LLNL/hypre.git</a></p></td>
</tr>
<tr class="row-odd"><td><p>hypre-mini-app</p></td>
<td><p><a class="reference external" href="https://github.com/exawind/hypre-mini-app.git">https://github.com/exawind/hypre-mini-app.git</a></p></td>
</tr>
<tr class="row-even"><td><p>ArborX</p></td>
<td><p><a class="reference external" href="https://github.com/arborx/ArborX.git">https://github.com/arborx/ArborX.git</a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="section" id="use-cases">
<h2>Use cases<a class="headerlink" href="#use-cases" title="Permalink to this headline">¶</a></h2>
<p>The exawind-builder provides capability for three different workflows of
increasing complexity:</p>
<ol class="arabic simple">
<li><p>The simplest use case is on a system where all the dependencies are managed
by the ExaWind team (e.g., NREL Peregrine, NERSC Cori, etc.). In this
scenario, the user just needs to clone the appropriate code repo and use the
build script to compile their desired branch with apporpriate CMake options.
This use case is described in <a class="reference internal" href="basic.html#basic-usage"><span class="std std-ref">Using exawind-builder to build software</span></a> section.</p></li>
<li><p>Depending on the task, users might need to use different branch of a
third-party library (TPL). For example, user might need a different branch of
OpenFAST or TIOGA when developing a new feature within Nalu-Wind. This will
require the user to maintain multiple development builds of the codes and
keep them all in sync. <a class="reference internal" href="basic.html#build-custom"><span class="std std-ref">Customizing the build process</span></a> provides information on how to
manage this workflow.</p></li>
<li><p>Finally, the user might need to install and manage all dependencies
themselves, e.g., on their personal laptops. <a class="reference internal" href="installation.html#installation"><span class="std std-ref">Setting up exawind-builder</span></a> details
all the necessary steps to setup your own ExaWind environment and manage all
dependencies on different machines. This mimics the <a class="reference external" href="https://github.com/Exawind/build-test">build-test</a> infrastructure of ExaWind project,
but opts to use system configuration as much as possible to minimize build
time on dependencies.</p></li>
</ol>
</div>
<div class="section" id="exawind-directory-structure">
<span id="exawind-dir-layout"></span><h2>Exawind directory structure<a class="headerlink" href="#exawind-directory-structure" title="Permalink to this headline">¶</a></h2>
<p>Exawind-builder recommends the organizing code under a standard directory
structure for ExaWind project. While it is not necessary to follow this
directory structure, and the user is free to call the build scripts from any
location, the standard directory structure will be used in the rest of the
manual. A brief description of the standard layout is presented here.</p>
<p>All source code, build directories, installation directories, and the
<code class="docutils literal notranslate"><span class="pre">exawind-builder</span></code> package itself is assumed to be located within
<code class="file docutils literal notranslate"><span class="pre">exawind</span></code> base directory. Within this directory the main subdirectories
are shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>exawind/
├── exawind-builder
├── exawind-config.sh
├── install
│   ├── hypre
│   ├── tioga
│   ├── trilinos-omp
│   └── trilinos
├── scripts
│   ├── hypre-clang.sh
│   ├── nalu-wind-clang.sh
│   ├── tioga-clang.sh
│   └── trilinos-clang.sh
├── spack
└── source
    ├── hypre
    ├── nalu-wind
    ├── openfast
    ├── tioga
    ├── trilinos
    └── wind-utils
</pre></div>
</div>
<p>The sub-directories are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">exawind-builder</span></code>: The build script package cloned from the git repository
that contains scripts to configure and build codes on different systems. This
directory must be considered read-only unless you are adding features to
exawind-builder. This directory is not necessary if you are using one of the
central installations of ExaWind.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spack</span></code>: Optional location for Spack if using Spack to manage dependencies.
Not used on NREL systems – Peregrine, Eagle, and Rhodes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code>: Local git repository checkouts of the ExaWind codes of interest to
the user. This is the recommended location for all the development versions of
the various codes (e.g., nalu-wind, openfast, etc.).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scripts</span></code>: The default build scripts for different project and compiler
combination. Users can either symlink the scripts into the build directory or
copy and modify them within different build directories (e.g., release vs.
debug builds). Use the <a class="reference internal" href="advanced.html#new-script"><span class="std std-ref">new-script.sh</span></a> utility to generate
these build scripts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">install</span></code>: The default install location where <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> will install
the headers, libraries, and executables.</p></li>
</ul>
<p>In addition to the sub-directories, users can also provide an optional
configuration file <code class="file docutils literal notranslate"><span class="pre">exawind-config.sh</span></code> that can be used to customize
options common to building all the codes.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">exawind-builder</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#use-cases">Use cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exawind-directory-structure">Exawind directory structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Setting up exawind-builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Using exawind-builder to build software</a></li>
<li class="toctree-l1"><a class="reference internal" href="newsys.html">Adding new system configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Manual Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">ExaWind Build Scripts User Manual</a></li>
      <li>Next: <a href="installation.html" title="next chapter">Setting up exawind-builder</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, ExaWind Project.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/introduction.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>